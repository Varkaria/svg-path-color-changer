import type { NextPage } from "next";
import Head from "next/head";
import Image from "next/image";
import { useState } from "react";

function getSelector(el: any): string {
  const names = [];
  do {
    let index = 0;
    let cursorElement = el;
    while (cursorElement !== null) {
      ++index;
      cursorElement = cursorElement.previousElementSibling;
    }
    names.unshift(el.tagName + ":nth-child(" + index + ")");
    el = el.parentElement;
  } while (el !== null);
  return names.join(" > ");
}

const Home: NextPage = () => {
  const [svgPathSelected, setSvgPathSelected] = useState("");
  const [colorSelected, setcolorSelected] = useState("");

  function handleSvgPathSelected(w: any) {
    setSvgPathSelected(getSelector(w.target));
    setcolorSelected(w.target.attributes.fill.value);
  }

  function setColortoSvg(c: string) {
    if (svgPathSelected !== "") {
      document.querySelector(svgPathSelected)?.setAttribute("fill", c);
      setcolorSelected(
        document.querySelector(svgPathSelected)?.attributes.fill.value
      );
    }
  }

  const unselectedStyle = {
    background: svgPathSelected === "" ? "#52525B" : "",
    opacity: svgPathSelected === "" ? 0.5 : 1,
    pointerEvent: svgPathSelected === "" ? "none" : "all",
  };

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className="flex items-center justify-center h-screen">
        <div>
          <div className="p-3 bg-white rounded-lg">
            <svg
              width="508"
              height="137"
              viewBox="0 0 279 75"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M62.8591 0H6.21019C4.74205 0 3.39291 0.509451 2.32989 1.36122L32.7931 71.8739C33.2337 72.8938 33.442 73.9557 33.4415 75H68.7898C72.2197 75 75 72.2197 75 68.7898V11.093L49.9357 62.7783C48.0358 66.6955 43.3209 68.3307 39.404 66.4314C35.4871 64.532 33.8516 59.8166 35.7511 55.8998L62.8591 0ZM16.971 75L0 35.7174V68.7898C0 72.2197 2.7804 75 6.21019 75H16.971Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M96.9375 20.6875L106.023 48.1648H106.381L115.449 20.6875H122.403L110.097 55.5966H102.29L90 20.6875H96.9375Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M131.544 56.125C129.885 56.125 128.391 55.8295 127.061 55.2386C125.743 54.6364 124.697 53.75 123.925 52.5795C123.163 51.4091 122.783 49.9659 122.783 48.25C122.783 46.7727 123.055 45.5511 123.601 44.5852C124.146 43.6193 124.891 42.8466 125.834 42.267C126.777 41.6875 127.839 41.25 129.021 40.9545C130.214 40.6477 131.447 40.4261 132.72 40.2898C134.254 40.1307 135.499 39.9886 136.453 39.8636C137.408 39.7273 138.101 39.5227 138.533 39.25C138.976 38.9659 139.197 38.5284 139.197 37.9375V37.8352C139.197 36.5511 138.817 35.5568 138.055 34.8523C137.294 34.1477 136.197 33.7955 134.766 33.7955C133.254 33.7955 132.055 34.125 131.169 34.7841C130.294 35.4432 129.703 36.2216 129.396 37.1193L123.635 36.3011C124.089 34.7102 124.839 33.3807 125.885 32.3125C126.93 31.233 128.209 30.4261 129.72 29.892C131.232 29.3466 132.902 29.0739 134.732 29.0739C135.993 29.0739 137.249 29.2216 138.499 29.517C139.749 29.8125 140.891 30.3011 141.925 30.983C142.959 31.6534 143.788 32.5682 144.413 33.7273C145.05 34.8864 145.368 36.3352 145.368 38.0739V55.5966H139.436V52H139.232C138.857 52.7273 138.328 53.4091 137.646 54.0455C136.976 54.6705 136.129 55.1761 135.107 55.5625C134.095 55.9375 132.908 56.125 131.544 56.125ZM133.146 51.5909C134.385 51.5909 135.459 51.3466 136.368 50.858C137.277 50.358 137.976 49.6989 138.464 48.8807C138.964 48.0625 139.214 47.1705 139.214 46.2045V43.1193C139.021 43.2784 138.692 43.4261 138.226 43.5625C137.771 43.6989 137.26 43.8182 136.692 43.9205C136.124 44.0227 135.561 44.1136 135.004 44.1932C134.447 44.2727 133.964 44.3409 133.555 44.3977C132.635 44.5227 131.811 44.7273 131.084 45.0114C130.357 45.2955 129.783 45.6932 129.362 46.2045C128.942 46.7045 128.732 47.3523 128.732 48.1477C128.732 49.2841 129.146 50.142 129.976 50.7216C130.805 51.3011 131.862 51.5909 133.146 51.5909Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M151.572 55.5966V29.4148H157.555V33.7784H157.828C158.305 32.267 159.124 31.1023 160.283 30.2841C161.453 29.4545 162.788 29.0398 164.288 29.0398C164.629 29.0398 165.01 29.0568 165.43 29.0909C165.862 29.1136 166.22 29.1534 166.504 29.2102V34.8864C166.243 34.7955 165.828 34.7159 165.26 34.6477C164.703 34.5682 164.163 34.5284 163.641 34.5284C162.516 34.5284 161.504 34.7727 160.607 35.2614C159.72 35.7386 159.021 36.4034 158.51 37.2557C157.999 38.108 157.743 39.0909 157.743 40.2045V55.5966H151.572Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M176.774 46.5967V40.3889L177.2 39.9318L186.609 29.4148H193.82L183.629 40.3889L179.011 44.3977L176.774 46.5967ZM170.604 55.5966V20.6875H176.774V55.5966H170.604ZM187.036 55.5966L179.011 44.3977L183.629 40.3889L194.416 55.5966H187.036Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M205.466 56.125C203.807 56.125 202.313 55.8295 200.983 55.2386C199.665 54.6364 198.619 53.75 197.847 52.5795C197.085 51.4091 196.705 49.9659 196.705 48.25C196.705 46.7727 196.977 45.5511 197.523 44.5852C198.068 43.6193 198.813 42.8466 199.756 42.267C200.699 41.6875 201.761 41.25 202.943 40.9545C204.136 40.6477 205.369 40.4261 206.642 40.2898C208.176 40.1307 209.42 39.9886 210.375 39.8636C211.33 39.7273 212.023 39.5227 212.455 39.25C212.898 38.9659 213.119 38.5284 213.119 37.9375V37.8352C213.119 36.5511 212.739 35.5568 211.977 34.8523C211.216 34.1477 210.119 33.7955 208.688 33.7955C207.176 33.7955 205.977 34.125 205.091 34.7841C204.216 35.4432 203.625 36.2216 203.318 37.1193L197.557 36.3011C198.011 34.7102 198.761 33.3807 199.807 32.3125C200.852 31.233 202.131 30.4261 203.642 29.892C205.153 29.3466 206.824 29.0739 208.653 29.0739C209.915 29.0739 211.17 29.2216 212.42 29.517C213.67 29.8125 214.813 30.3011 215.847 30.983C216.881 31.6534 217.71 32.5682 218.335 33.7273C218.972 34.8864 219.29 36.3352 219.29 38.0739V55.5966H213.358V52H213.153C212.778 52.7273 212.25 53.4091 211.568 54.0455C210.898 54.6705 210.051 55.1761 209.028 55.5625C208.017 55.9375 206.83 56.125 205.466 56.125ZM207.068 51.5909C208.307 51.5909 209.381 51.3466 210.29 50.858C211.199 50.358 211.898 49.6989 212.386 48.8807C212.886 48.0625 213.136 47.1705 213.136 46.2045V43.1193C212.943 43.2784 212.614 43.4261 212.148 43.5625C211.693 43.6989 211.182 43.8182 210.614 43.9205C210.045 44.0227 209.483 44.1136 208.926 44.1932C208.369 44.2727 207.886 44.3409 207.477 44.3977C206.557 44.5227 205.733 44.7273 205.006 45.0114C204.278 45.2955 203.705 45.6932 203.284 46.2045C202.864 46.7045 202.653 47.3523 202.653 48.1477C202.653 49.2841 203.068 50.142 203.898 50.7216C204.727 51.3011 205.784 51.5909 207.068 51.5909Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M225.494 55.5966V29.4148H231.477V33.7784H231.75C232.227 32.267 233.045 31.1023 234.205 30.2841C235.375 29.4545 236.71 29.0398 238.21 29.0398C238.551 29.0398 238.932 29.0568 239.352 29.0909C239.784 29.1136 240.142 29.1534 240.426 29.2102V34.8864C240.165 34.7955 239.75 34.7159 239.182 34.6477C238.625 34.5682 238.085 34.5284 237.562 34.5284C236.438 34.5284 235.426 34.7727 234.528 35.2614C233.642 35.7386 232.943 36.4034 232.432 37.2557C231.92 38.108 231.665 39.0909 231.665 40.2045V55.5966H225.494Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M244.526 55.5966V29.4148H250.696V55.5966H244.526ZM247.628 25.6989C246.651 25.6989 245.81 25.375 245.105 24.7273C244.401 24.0682 244.048 23.2784 244.048 22.358C244.048 21.4261 244.401 20.6364 245.105 19.9886C245.81 19.3295 246.651 19 247.628 19C248.616 19 249.457 19.3295 250.151 19.9886C250.855 20.6364 251.207 21.4261 251.207 22.358C251.207 23.2784 250.855 24.0682 250.151 24.7273C249.457 25.375 248.616 25.6989 247.628 25.6989Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
              <path
                d="M264.575 56.125C262.916 56.125 261.422 55.8295 260.092 55.2386C258.774 54.6364 257.729 53.75 256.956 52.5795C256.195 51.4091 255.814 49.9659 255.814 48.25C255.814 46.7727 256.087 45.5511 256.632 44.5852C257.178 43.6193 257.922 42.8466 258.865 42.267C259.808 41.6875 260.871 41.25 262.053 40.9545C263.246 40.6477 264.479 40.4261 265.751 40.2898C267.286 40.1307 268.53 39.9886 269.484 39.8636C270.439 39.7273 271.132 39.5227 271.564 39.25C272.007 38.9659 272.229 38.5284 272.229 37.9375V37.8352C272.229 36.5511 271.848 35.5568 271.087 34.8523C270.325 34.1477 269.229 33.7955 267.797 33.7955C266.286 33.7955 265.087 34.125 264.2 34.7841C263.325 35.4432 262.734 36.2216 262.428 37.1193L256.666 36.3011C257.121 34.7102 257.871 33.3807 258.916 32.3125C259.962 31.233 261.24 30.4261 262.751 29.892C264.263 29.3466 265.933 29.0739 267.763 29.0739C269.024 29.0739 270.28 29.2216 271.53 29.517C272.78 29.8125 273.922 30.3011 274.956 30.983C275.99 31.6534 276.82 32.5682 277.445 33.7273C278.081 34.8864 278.399 36.3352 278.399 38.0739V55.5966H272.467V52H272.263C271.888 52.7273 271.359 53.4091 270.678 54.0455C270.007 54.6705 269.161 55.1761 268.138 55.5625C267.126 55.9375 265.939 56.125 264.575 56.125ZM266.178 51.5909C267.416 51.5909 268.49 51.3466 269.399 50.858C270.308 50.358 271.007 49.6989 271.496 48.8807C271.996 48.0625 272.246 47.1705 272.246 46.2045V43.1193C272.053 43.2784 271.723 43.4261 271.257 43.5625C270.803 43.6989 270.291 43.8182 269.723 43.9205C269.155 44.0227 268.592 44.1136 268.036 44.1932C267.479 44.2727 266.996 44.3409 266.587 44.3977C265.666 44.5227 264.842 44.7273 264.115 45.0114C263.388 45.2955 262.814 45.6932 262.393 46.2045C261.973 46.7045 261.763 47.3523 261.763 48.1477C261.763 49.2841 262.178 50.142 263.007 50.7216C263.837 51.3011 264.893 51.5909 266.178 51.5909Z"
                fill="black"
                onClick={(e) => handleSvgPathSelected(e)}
              />
            </svg>
          </div>

          <div className="flex items-center justify-center mx-auto mt-3 space-x-2">
            <button
              className="bg-blue-500 button hover:bg-blue-600"
              style={unselectedStyle}
              onClick={() => setColortoSvg(colorSelected)}
            >
              Apply Color
            </button>
            <div className="p-2 bg-white rounded-md">
              <input
                type="color"
                value={colorSelected}
                onChange={(e) => setcolorSelected(e.target.value)}
              />
            </div>
            <button
              className="bg-purple-500 button hover:bg-purple-600"
              style={unselectedStyle}
              onClick={() =>
                setColortoSvg(
                  `#${Math.floor(Math.random() * 16777215).toString(16)}`
                )
              }
            >
              Random
            </button>
          </div>

          <p
            className="max-w-sm mx-auto mt-3 text-sm font-semibold text-center text-white"
            style={{
              opacity: svgPathSelected !== "" ? 1 : 0,
            }}
          >
            Selecting {svgPathSelected.split(">").slice(-1)}
          </p>
        </div>
      </div>
    </div>
  );
};

export default Home;
